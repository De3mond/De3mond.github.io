# 逆向工具
* 本教程只演示几种工具的基础使用

## IDA
* IDA 支持多种架构的汇编程序的逆向分析，可以逆向出程序的汇编代码
* IDA 自带的 Hey-Ray 插件可以通过分析逆向代码生成伪 C 代码
    * 这个代码不是我们编写程序的源代码，但是功能上会尽可能的接近
    * 不同电脑逆向出来的代码可能不同，甚至重新打开原来的程序都有可能不同
* **基础使用**
  1. 将需要分析的程序用 IDA 打开，注意程序是 32 位还是 64 位的，64 位的只能用 IDA64 打开
  ![1](amWiki/images/reverse/1.png "1")
  2. 启动后可以看到 IDA 的界面，以及主函数的汇编代码,顶上的导航栏每个颜色表示不同的程序段
    * 同一个颜色所占一的一块区域表示同一个作用的程序段
    * 像 text 段是程序的代码， bss 段是全局变量这样的
    * ![2](amWiki/images/reverse/2.png "2")
  3. 左侧是函数窗口，包括程序调用的函数和我们的自定义函数，一般搜索 main 或者 start 可以找到程序的入口函数
    * 有需要找特定函数的时候可以用 Ctrl F 打开搜索窗口
    * 如果需要跳转到特定的地址，使用快捷键 G，然后输入地址就可以跳转
    * 双击想看的函数，使用 F5 可以生成 C 伪代码
    * ![3](amWiki/images/reverse/3.png "3")
  4. 交叉参考
    * ![4](amWiki/images/reverse/4.png "4")
    * 交叉参考指的是某一段代码或数据被程序其它部分引用了
      * 交叉参考分为数据交叉和代码交叉
    * 两种交叉参考都可以在会变界面看到 XREF
      * 代码交叉是 CODE XREF
      * 数据交叉是 DATA XREF
    * 双击右侧的箭头可以跳转到引用此处内容的调用者处
    * ![5](amWiki/images/reverse/5.png "5")
      * 点击需要检查交叉参考的数据或者代码的名称处
      * 按 X 可以打开交叉参考窗口
      * 可以看到其被何处的汇编语句调用，以及如何调用
  5. 重命名
    * ![6](amWiki/images/reverse/6.png "6")
      * 为了方便程序分析， 一般会把程序给定的变量名或函数名修改成更方便理解的变量名
  6. 标签设置
    * 一个程序通常会较为复杂，经常需要配合多处的代码上下跳转，这时候可以标记一下关键的汇编代码点，方便之后快速跳转
      * 使用 Alt + M 可以标记汇编代码的位置
      * 使用 Ctrl + M 可以在标签中跳转
    * ![7](amWiki/images/reverse/7.png "7")
  7. 进制转化
    * 点击数字，使用快捷键 H 可以切换 16 进制和 10 进制，使用 B 切换成二进制，使用 R 切换成字符或字符串，右键数字里面还可以选八进制
      * ![8](amWiki/images/reverse/8.png "8")
  8. 类型转换
    * IDA 在分析数组数据的时候，默认每一项的数据都是 1 字节大小的,如果需要转换其为 2 字节的，则需要点击对应的数字，使用 D 来转换
      * 按 1 下转换成 2 字节，再按变成 4 字节,再按一下变成 8 字节了，再按又成 1 字节了
      * ![9](amWiki/images/reverse/9.png "9")
  9. 数组处理
    * IDA 在大多数情况下，对于每个数据都当成单个元素来处理，如果需要将整个数据转换成数组形式，使用键盘上的 * 来处理，也就是 Shift + 8
  10. IDA静态分析快捷键
    * ![10](amWiki/images/reverse/10.png "10")